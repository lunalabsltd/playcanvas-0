<html>
    <head>
        <script src="../../../build/output/playcanvas-latest.js"></script>
        <link href="../../style.css" rel="stylesheet" />
    </head>
    <body>
        <canvas id="application-canvas"></canvas>

        <script>
            var canvas = document.getElementById("application-canvas");
            canvas.focus();

            // Create the application and start the update loop
            var app = new pc.Application(canvas, {
                mouse: new pc.Mouse(document.body),
                touch: new pc.TouchDevice(document.body)
            });

            app.start();

            window.onresize = function() {
                canvas.style = null;
                app.graphicsDevice.setResolution( window.innerWidth, window.innerHeight );  
            }

            // Set the canvas to fill the window and automatically change resolution to be the same as the canvas size
            app.setCanvasFillMode(pc.FILLMODE_FILL_WINDOW);
            app.setCanvasResolution(pc.RESOLUTION_AUTO);

            var textureAsset = new pc.Asset('red_button_atlas.png', "texture", {url: "/examples/assets/button/red_button_atlas.png"});
            app.assets.add( textureAsset );

            var fontAsset = new pc.Asset('Arial.json', "font", {url: "/examples/assets/Arial/Arial.json"});
            app.assets.add( fontAsset );

            var camera = new pc.Entity();
            camera.addComponent("camera", { clearStencilBuffer: true, clearColor: new pc.Color(1, 1, 1) });
            app.root.addChild(camera);
            camera.rotate(0, 0, 0);
            camera.translate(0, 0, 0);
            
            app.scene.ambientLight = new pc.Color(0.2, 0.2, 0.2);

            var screen = new pc.Entity();
            screen.addComponent("screen", {
                screenType: pc.SCREEN_TYPE_CAMERA,
                cameraDistance: 100,
                debugColor: new pc.Color(1, 0, 0)
            });

            screen.screen.enablePointerEvents();

            var dt = 0.0;
            var group = new pc.Entity();
            group.addComponent("element", { 
                type: pc.ELEMENTTYPE_IMAGE,
                pivot: new pc.Vec2(0.5, 0.5),
                anchor: new pc.Vec4(0.3 + dt, 0.3 + dt, 0.7 + dt, 0.7 + dt),
                textureAsset: textureAsset,
                rect: new pc.Vec4(0, 0.0, 1, 0.25),
                border: new pc.Vec4(12, 12, 12, 12)
            });

            var label = new pc.Entity();
            label.addComponent("element", { 
                type: pc.ELEMENTTYPE_TEXT,
                anchor: new pc.Vec4(0, 0, 1, 1),
                corners: new pc.Vec4(-100, -100, 100, 100),
                fontAsset: fontAsset,
                fontSize: 30,
                text: "Click me\nHover me",
                color: new pc.Color(0, 0, 0),
                align: pc.TEXT_ALIGN_CENTER,
                verticalAlign: pc.TEXT_ALIGN_MIDDLE
            });
            group.addChild(label)

            group.element.on(pc.POINTEREVENT_ENTER, function() {
                this.color = new pc.Color(1, 0.95, 0.85);
            }, group.element);

            group.element.on(pc.POINTEREVENT_LEAVE, function() {
                this.color = new pc.Color(1, 1, 1);
            }, group.element);

            group.element.on(pc.POINTEREVENT_UP, function() {
                group.setLocalScale(1, 1, 1);
            }, group.element);

            group.element.on(pc.POINTEREVENT_DOWN, function() {
                group.setLocalScale(0.98, 0.98, 0.98);
            }, group.element);

            group.element.on(pc.POINTEREVENT_CLICK, function() {
                alert("You clicked me?");
            }, group.element);

            screen.addChild(group);

            app.root.addChild(screen);
        </script>
    </body>
</html>
